&НаСервере
Процедура ТоварыНаименованиеПриИзмененииНаСервере(Идентификатор)
	 	//{{КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
	// Данный фрагмент построен конструктором.
	// При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
	Стр = Объект.Товары.НайтиПоИдентификатору(Идентификатор);

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ЦеныПродажиСрезПоследних.Период КАК Период,
		|	ЦеныПродажиСрезПоследних.Наименование КАК Наименование,
		|	ЦеныПродажиСрезПоследних.Цена КАК Цена
		|ИЗ
		|	РегистрСведений.ЦеныПродажи.СрезПоследних(,Наименование = &Наименование) КАК ЦеныПродажиСрезПоследних";
	
	Запрос.УстановитьПараметр("Дата", Объект.Дата);
	Запрос.УстановитьПараметр("Наименование", Стр.Наименование);
	РезультатЗапроса = Запрос.Выполнить();
	
	Выборка = РезультатЗапроса.Выбрать();
	
	Если Выборка.Следующий() Тогда		
		 Стр.Цена = Строка(Выборка.Цена);
	КонецЕсли;
	
	//}}КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА

КонецПроцедуры


&НаКлиенте
Процедура ТоварыНаименованиеПриИзменении(Элемент)
	Стр = Элементы.Товары.ТекущиеДанные;
	ТоварыНаименованиеПриИзмененииНаСервере(Стр.ПолучитьИдентификатор());
КонецПроцедуры
